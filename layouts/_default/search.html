{{ define "main" }}
<section class="resume-section p-3 p-lg-5 d-flex flex-column">
  <div class="my-auto" >
    <form action="{{ "search" | absURL }}">
      <input id="search-query" name="s"/>
    </form>
    <div id="search-results">
     <h3>Matching pages</h3>

      <div id="no-result" style="display:none">
        <p>No matches found</p>
      </div>
    </div>
  </div>
</section>
<!-- this template is sucked in by search.js and appended to the search-results div above. So editing here will adjust style -->
<script id="search-result-template" type="text/x-js-template">
    <div id="summary-${key}">
      <h4><a href="${link}">${title}</a></h4>
      <p>${snippet}</p>
      ${ isset tags }<p>Tags: ${tags}</p>${ end }
      ${ isset categories }<p>Categories: ${categories}</p>${ end }
    </div>
</script>

<script src="{{ "js/mark.min.js" | relURL }}"></script>
<script src="{{ "js/fuse.js@6.4.6" | relURL }}"></script>
<script src="{{ "js/search-engine.js" | relURL }}"></script>
<script type="text/javascript">
  window.addEventListener("DOMContentLoaded", (event) => {
    var search = new SearchEngine({
      searchInput: document.querySelector('#search-query'),
      resultsField: document.querySelector('#search-results'),
      resultsTemplate: document.querySelector('#search-result-template'),
      url: '/search.json',
    })
  });
</script>
{{ end }}
